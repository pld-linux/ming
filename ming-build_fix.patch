diff --git a/src/actioncompiler/swf5compiler.y b/src/actioncompiler/swf5compiler.y
--- a/src/actioncompiler/swf5compiler.y
+++ b/src/actioncompiler/swf5compiler.y
@@ -1795,7 +1795,7 @@
 
 with
 	: WITH
-				{ $$ = bufferWriteOp(asmBuffer,
+				{ $<len>$ = bufferWriteOp(asmBuffer,
 						     SWFACTION_WITH); }
 	  opcode_list END	{ $$ = $<len>2 + $3;
 				  bufferPatchLength(asmBuffer, $3); }
@@ -1828,9 +1828,9 @@
 	;
 
 opcode
-	: PUSH 			{ $$ = bufferWriteOp(asmBuffer,
+	: PUSH 			{ $<len>$ = bufferWriteOp(asmBuffer,
 						     SWFACTION_PUSH);
-				  $$ += bufferWriteS16(asmBuffer, 0); }
+				  $<len>$ += bufferWriteS16(asmBuffer, 0); }
 	  push_list		{ $$ = $<len>2 + $3;
 				  bufferPatchLength(asmBuffer, $3); }
 
